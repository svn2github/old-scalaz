<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scalaz/Memo.scala</title>
        <script type="text/javascript" src="../jquery-all.js"></script>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scalaz

<span class="keyword">sealed</span> <span class="keyword">trait</span> <a title="trait Memo[K, V] extends java.lang.Object" id="11043">Memo</a>[<a title="&gt;: Nothing &lt;: Any" id="15765">K</a>, <a title="&gt;: Nothing &lt;: Any" id="15766">V</a>] <a title="java.lang.Object" id="1764">{</a>
  <span class="keyword">def</span> <a title="(z: (K) =&gt; V)(K) =&gt; V" id="97582">apply</a>(<a title="(K) =&gt; V" id="97583">z</a>: K =&gt; V): K =&gt; V
}

<span class="keyword">trait</span> <a title="trait Memos extends java.lang.Object with ScalaObject" id="11076">Memos</a> <a title="ScalaObject" id="430">{</a>
  <span class="keyword">def</span> <a title="[K, V](f: ((K) =&gt; V) =&gt; (K) =&gt; V)java.lang.Object with scalaz.Memo[K,V]" id="23318">memo</a>[<a title="&gt;: Nothing &lt;: Any" id="23321">K</a>, <a title="&gt;: Nothing &lt;: Any" id="23322">V</a>](<a title="((K) =&gt; V) =&gt; (K) =&gt; V" id="122657">f</a>: (K =&gt; V) =&gt; K =&gt; V) = <a href="#122660" title="java.lang.Object with scalaz.Memo[K,V]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalaz.Memo[K,V]" id="122660">Memo</a>[K, V] {
    <span class="keyword">def</span> <a title="(z: (K) =&gt; V)(K) =&gt; V" id="122662">apply</a>(<a title="(K) =&gt; V" id="122663">z</a>: K =&gt; V) = <a href="#122657" title="(v1: (K) =&gt; V)(K) =&gt; V">f</a>(<a href="#122663" title="(K) =&gt; V">z</a>)
  }

  <span class="keyword">def</span> <a title="&lt;refinement&gt;[K, V] extends java.lang.Object with scalaz.Memo[K,V]" id="23323">nilMemo</a>[<a title="&gt;: Nothing &lt;: Any" id="23326">K</a>, <a title="&gt;: Nothing &lt;: Any" id="23327">V</a>] = <a href="#23318" title="[K, V](f: ((K) =&gt; V) =&gt; (K) =&gt; V)java.lang.Object with scalaz.Memo[K,V]">memo</a><span title="(f: ((K) =&gt; V) =&gt; (K) =&gt; V)java.lang.Object with scalaz.Memo[K,V]">[</span><a href="#23326" title="K">K</a>, <a href="#23327" title="V">V</a>](<a title="(K) =&gt; V" id="163453">z</a> =&gt; <a href="#163453" title="(K) =&gt; V">z</a>)

  <span class="keyword">def</span> <a title="[V](n: Int)(implicit evidence$1: Manifest[V])java.lang.Object with scalaz.Memo[Int,V]" id="163457">arrayMemo</a>[<a title="&gt;: Nothing &lt;: Any" id="23330">V</a>: Manifest](<a title="Int" id="163456">n</a>: <span title="Int">Int</span>) = {
    <span class="keyword">val</span> <a title="Array[V]" id="163460">a</a> = <a href="#163457" title="(len: Int)Array[V]" id="74230" class="keyword">new</a> Array[V](<a href="#163456" title="Int">n</a>)

    <a href="#23318" title="[K, V](f: ((K) =&gt; V) =&gt; (K) =&gt; V)java.lang.Object with scalaz.Memo[K,V]">memo</a><span title="(f: ((Int) =&gt; V) =&gt; (Int) =&gt; V)java.lang.Object with scalaz.Memo[Int,V]">[</span><span title="Int">Int</span>, <a href="#23330" title="V">V</a>](<a title="(Int) =&gt; V" id="163470">f</a> =&gt; <a title="Int" id="163472">k</a> =&gt; {
      <span class="keyword">val</span> <a title="V" id="163473">t</a> = <a href="#163460" title="(i: Int)V" id="20921">a</a>(<a href="#163472" title="Int">k</a>)
      <span title="V" class="keyword">if</span>(<a href="#163473" title="(x$1: Any)Boolean" id="4055">t</a> == <span title="Null(null)" class="keyword">null</span>) {
        <span class="keyword">val</span> <a title="V" id="163476">v</a> = <a href="#163470" title="(v1: Int)V">f</a>(<a href="#163472" title="Int">k</a>)
        <a href="#163460" title="(i: Int,x: V)Unit" id="20923">a</a>(<a href="#163472" title="Int">k</a>) = <a href="#163476" title="V">v</a>
        <a href="#163476" title="V">v</a>
      } <span class="keyword">else</span> <a href="#163473" title="V">t</a>
    })
  }

  <span class="keyword">def</span> <a title="&lt;refinement&gt;[K, V] extends java.lang.Object with scalaz.Memo[K,V]" id="23331">mutableHashMapMemo</a>[<a title="&gt;: Nothing &lt;: Any" id="23334">K</a>, <a title="&gt;: Nothing &lt;: Any" id="23335">V</a>] = {
    <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[K,V]" id="122514">a</a> = <span title="scala.collection.mutable.HashMap[K,V]" class="keyword">new</span> collection.mutable.<a title="scala.collection.mutable.HashMap[K,V]" id="28912">HashMap</a>[K, V]

    <a href="#23318" title="[K, V](f: ((K) =&gt; V) =&gt; (K) =&gt; V)java.lang.Object with scalaz.Memo[K,V]">memo</a><span title="(f: ((K) =&gt; V) =&gt; (K) =&gt; V)java.lang.Object with scalaz.Memo[K,V]">[</span><a href="#23334" title="K">K</a>, <a href="#23335" title="V">V</a>](<a title="(K) =&gt; V" id="122693">f</a> =&gt; <a title="K" id="122695">k</a> =&gt;
      <a href="#122514" title="(key: K)Option[V]" id="122522">a</a> <span title="(default: =&gt; V)V">get</span> <a href="#122695" title="K">k</a> getOrElse {
        <span class="keyword">val</span> <a title="V" id="122704">v</a> = <a href="#122693" title="(v1: K)V">f</a>(<a href="#122695" title="K">k</a>)
        <a href="#122514" title="(key: K,value: V)Unit" id="122527">a</a> update (<a href="#122695" title="K">k</a>, <a href="#122704" title="V">v</a>)
        <a href="#122704" title="V">v</a>
      })
  }

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="[K, V](m: Map[K,V])java.lang.Object with scalaz.Memo[K,V]" id="23336">immutableMapMemo</a>[<a title="&gt;: Nothing &lt;: Any" id="23339">K</a>, <a title="&gt;: Nothing &lt;: Any" id="23340">V</a>](<a title="Map[K,V]" id="163485">m</a>: <a title="Map[K,V]" id="19851">Map</a>[K, V]) = {
    <span class="keyword">var</span> <a title="Map[K,V]" id="163488">a</a> = <a href="#163485" title="Map[K,V]">m</a>

    <a href="#23318" title="[K, V](f: ((K) =&gt; V) =&gt; (K) =&gt; V)java.lang.Object with scalaz.Memo[K,V]">memo</a><span title="(f: ((K) =&gt; V) =&gt; (K) =&gt; V)java.lang.Object with scalaz.Memo[K,V]">[</span><a href="#23339" title="K">K</a>, <a href="#23340" title="V">V</a>](<a title="(K) =&gt; V" id="163492">f</a> =&gt; <a title="K" id="163494">k</a> =&gt; {
      <a href="#163488" title="(key: K)Option[V]" id="77112">a</a> <span title="(default: =&gt; V)V">get</span> <a href="#163494" title="K">k</a> getOrElse {
        <span class="keyword">val</span> <a title="V" id="163501">v</a> = <a href="#163492" title="(v1: K)V">f</a>(<a href="#163494" title="K">k</a>)
        <a href="#163488" title="Map[K,V]">a</a> = <a href="#163488" title="(key: K,value: V)scala.collection.immutable.Map[K,V]" id="77203">a</a> updated (<a href="#163494" title="K">k</a>, <a href="#163501" title="V">v</a>)
        <a href="#163501" title="V">v</a>
      }
    })
  }

  <span class="keyword">import</span> collection.immutable.{HashMap, ListMap, TreeMap}

  <span class="keyword">def</span> <a title="&lt;refinement&gt;[K, V] extends java.lang.Object with scalaz.Memo[K,V]" id="23342">immutableHashMapMemo</a>[<a title="&gt;: Nothing &lt;: Any" id="23345">K</a>, <a title="&gt;: Nothing &lt;: Any" id="23346">V</a>] = <a href="#23336" title="(m: Map[K,V])java.lang.Object with scalaz.Memo[K,V]">immutableMapMemo</a>(<span title="scala.collection.immutable.HashMap[K,V]" class="keyword">new</span> <a title="scala.collection.immutable.HashMap[K,V]" id="20238">HashMap</a>[K, V])

  <span class="keyword">def</span> <a title="&lt;refinement&gt;[K, V] extends java.lang.Object with scalaz.Memo[K,V]" id="23347">immutableListMapMemo</a>[<a title="&gt;: Nothing &lt;: Any" id="23350">K</a>, <a title="&gt;: Nothing &lt;: Any" id="23351">V</a>] = <a href="#23336" title="(m: Map[K,V])java.lang.Object with scalaz.Memo[K,V]">immutableMapMemo</a>(<span title="scala.collection.immutable.ListMap[K,V]" class="keyword">new</span> <a title="scala.collection.immutable.ListMap[K,V]" id="20247">ListMap</a>[K, V])

  <span class="keyword">def</span> <a title="&lt;refinement&gt;[K &lt;: Ordered[K], V] extends java.lang.Object with scalaz.Memo[K,V]" id="23352">immutableTreeMapMemo</a>[<a title="&gt;: Nothing &lt;: Ordered[K]" id="23355">K</a> &lt;: Ordered[K], <a title="&gt;: Nothing &lt;: Any" id="23356">V</a>] = <a href="#23336" title="(m: Map[K,V])java.lang.Object with scalaz.Memo[K,V]">immutableMapMemo</a>(<a title="()(implicit ordering: Ordering[K])scala.collection.immutable.TreeMap[K,V]" id="27080" class="keyword">new</a> <a title="scala.collection.immutable.TreeMap[K,V]" id="19866">TreeMap</a>[K, V])
}

        </pre>
    </body>
</html>